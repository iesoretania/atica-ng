{% trans_default_domain 'layout' %}
{% extends 'base.html.twig' %}
{% import 'layout/macros_layout.html.twig' as ml %}

{% block title %}
    {% if title is defined and title is not empty %}
        {{ title }} -
    {% endif %}
    {{ user_extension.currentOrganization.name }}
{%- endblock %}

{% block body %}
<div id="wrapper">
    <!-- Barra lateral -->
    <nav class="navbar navbar-inverse navbar-fixed-top" id="sidebar-wrapper" role="navigation">
        <ul class="nav sidebar-nav">
            <li class="sidebar-brand text-center">
                <a href="{{ path('frontpage') }}">
                    {% block navbartitle %}{{ user_extension.currentOrganization.name ?? app_name }}{% endblock %}
                </a>
            </li>
            {% for item in menu_extension.menu.children %}
                <li>
                    <a href="{{ path(item.routeName, item.routeParams|default([])) }}">
                        {% if item.icon %}<i class="fa fa-{{ item.icon }}"></i>{% endif %}
                        {{ item.caption | trans([], 'menu') }}
                    </a>
                </li>
            {% endfor %}
        </ul>
    </nav>

    <!-- Contenido -->
    <div id="page-content-wrapper">
        <nav class="navbar navbar-default navbar-fixed-top">
            <div class="container-fluid">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" id="sidebar" data-toggle="offcanvas">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="sr-only">{{ 'navbar.expand'|trans }}</span>
                    </button>
                </div>
                <div class="collapse navbar-collapse">
                    <ul class="nav navbar-nav navbar-right">
                    {% if not app.user %}
                        <li><a href="{{ path('login') }}" class="btn btn-default navbar-btn pull-right"><i class="fa fa-sign-in"></i><span class="hidden-sm"> Entrar en la aplicaci贸n</span></a></li>
                    {% else %}
                        {% include 'layout/partial_usermenu.html.twig' %}
                    {% endif %}
                    </ul>
                </div>
            </div>
        </nav>
        <div class="container">
            {% if menu_path is defined and menu_path is not empty %}
                {% include 'layout/partial_breadcrumb.html.twig' %}
            {% endif %}
            {% if title is defined %}
                <h1 class="well">{{ title }}</h1>
            {% endif %}
            {{ ml.flash_message('success', 'success') }}
            {{ ml.flash_message('error', 'danger') }}
            {% block content %}{% endblock %}
        </div>
        <footer class="footer no-print" role="contentinfo">
            <div class="container">
                {% block footer %}
                    <p class="text-muted">
                        &copy; 2015-{{ 'now'|date('Y') }}, Luis Ram贸n L贸pez L贸pez
                    </p>
                {% endblock %}
            </div>
        </footer>
    </div>
</div>
{% endblock %}
